<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ocean Survival VR - Realistic Water</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/objects/Water.js"></script>
    <script>
      // Custom A-Frame component για Water shader
      AFRAME.registerComponent('realistic-water', {
        schema: {
          color: {default: '#1c3c5d'}
        },
        init: function () {
          const el = this.el;
          const scene = el.sceneEl.object3D;

          const waterGeometry = new THREE.PlaneGeometry(5000, 5000, 256, 256);
          this.water = new THREE.Water(
            waterGeometry,
            {
              textureWidth: 512,
              textureHeight: 512,
              waterNormals: new THREE.TextureLoader().load('https://threejs.org/examples/textures/waternormals.jpg', function (texture) {
                texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
              }),
              sunDirection: new THREE.Vector3(),
              sunColor: 0xffffff,
              waterColor: this.data.color,
              distortionScale: 3.7,
              fog: scene.fog !== undefined
            }
          );

          this.water.rotation.x = - Math.PI / 2;
          scene.add(this.water);
        },
        tick: function (time, delta) {
          if (this.water) {
            this.water.material.uniforms['time'].value += delta / 1000;
          }
        }
      });
    </script>
  </head>
  <body>
    <a-scene fog="type: exponential; color: #0a1a2f; density: 0.04">

      <!-- Ουρανός -->
      <a-sky color="#0d1b2a"></a-sky>

      <!-- Ρεαλιστική Θάλασσα -->
      <a-entity realistic-water="color: #1c3c5d"></a-entity>

      <!-- Παίκτης -->
      <a-entity id="player"
        camera
        wasd-controls="acceleration: 15"
        look-controls
        position="0 2 0">
      </a-entity>

    </a-scene>
  </body>
</html>
